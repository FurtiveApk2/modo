<!DOCTYPE html>
<!-- ?RemiNombre=Juan Carlos Ahumada&RemiCuit=2020202020&RemiCbu=0000003100020309466233&RemiSaldo=52550&RemiMotivo=9991&DestiNombre1=Play Mendoza S.A.-&DestiNombre2=Play Mendoza S.A. Play Mendoza S.A.&DestiAlias=petra.dance.2023&DestiCbuDest=000000005555555&DestiCuit=2203333323030&DestiCuenta=Mercado Pago&DestiTipo=6661&DestiImagen=no&monto=0&hora=Actual&TresCod=777 -->
<!-- usar window.open("finishim32.html", '_self'); para cerrar la app -->
<html>
    <head>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">		
        <script src="https://kit.fontawesome.com/67821f8363.js" crossorigin="anonymous"></script>
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.3.1/jspdf.umd.min.js"></script>
		<link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css">
		<link rel="stylesheet" href="sliderCss.css">
		<link rel="stylesheet" href="styles.css"> 
		
	</head>
    <body>
		
        <div id="loader" style="display: flex; justify-content: center; align-items: center;">
            <!-- Spinner -->
            <img src="img/spinner.gif" class="spinner"></img>
		</div>
		
		<div id="lonjaStatus" style="height: 26px;z-index: 999999999;background: black; position: fixed; top: 0; width: 100%;opacity: 0.3;"> </div>
		
		<div id="content" style="display: none;">  
			
            
			<div id="div1">
			    <i id="eye-icon" class="fa-regular fa-eye fa-sm"></i>
				<img src="img/enca.jpg"></img>
				<div id="iniciales">					 
					<b><span id="inic">CR</span></b>	
				</div>
				<div id="nombree">					 
					<b><span> Hola<br> <span id="tit">Carlos</span> <img src="img/manito.jpg" id="manito" style="top: 3px; position: relative;width: 15%;"></img></span></b>	
				</div>
				
			</div>
			
			
			<div class="swiper-container" style="position: relative;margin-top: 2%;">
				<div class="swiper-wrapper">
					<div class="swiper-slide">				
						<div id="divi">
							<img src="img/imagen1.jpg"/></img>
							<div class="texto-superior-derecha">
								<div id="enc2">
									<b> <span style="font-family: 'DM Sans', sans-serif;font-size:15px;position: relative;margin-right: 2px;top:-7px">$</span><span id="sald" style="font-size:25px;"></span><span id="dec" style="font-size: 20px;">63</span>     
										<br>
									<span style="font-size: 13px;margin-top: 15px;position: relative;top: 6px;">CA • <span id="nCuenta">1111</span></span> </b>	
								</div>
								
							</div>
						</div>
					</div>
					<div class="swiper-slide"><img src="img/imagen2.jpg"></div>
					<div class="swiper-slide" id="escapar"><img src="img/imagen3.jpg"></div>
				</div>
			</div>
			
			
			<div id="botonera1">
				<img id="enviar" class="boton" src="img/botonera/enviarUP.jpg" onmousedown="cambiarImagen('enviar', 'img/botonera/enviarDw.jpg')" onmouseup="restaurarImagen('enviar')" ontouchstart="cambiarImagen('enviar', 'img/botonera/enviarDw.jpg')" ontouchend="restaurarImagen('enviar')"/>
				<img id="pagar" class="boton" src="img/botonera/pagarUP.jpg" onmousedown="cambiarImagen('pagar', 'img/botonera/pagarDw.jpg')" onmouseup="restaurarImagen('pagar')" ontouchstart="cambiarImagen('pagar', 'img/botonera/pagarDw.jpg')" ontouchend="restaurarImagen('pagar')"/>
			</div>
			
		    <div id="botonera2">
				<img id="pedir" class="boton" src="img/botonera/pedirUP.jpg" onmousedown="cambiarImagen('pedir', 'img/botonera/pedirDw.jpg')" onmouseup="restaurarImagen('pedir')" ontouchstart="cambiarImagen('pedir', 'img/botonera/pedirDw.jpg')" ontouchend="restaurarImagen('pedir')"/>
				<img id="gaming" class="boton" src="img/botonera/gamingUP.jpg" onmousedown="cambiarImagen('gaming', 'img/botonera/gamingDw.jpg')" onmouseup="restaurarImagen('gaming')" ontouchstart="cambiarImagen('gaming', 'img/botonera/gamingDw.jpg')" ontouchend="restaurarImagen('gaming')"/>
				<img id="recargar" class="boton" src="img/botonera/recargarUP.jpg" onmousedown="cambiarImagen('recargar', 'img/botonera/recargarDw.jpg')" onmouseup="restaurarImagen('recargar')" ontouchstart="cambiarImagen('recargar', 'img/botonera/recargarDw.jpg')" ontouchend="restaurarImagen('recargar')"/>
			</div>
			
			<script>
				function cambiarImagen(id, nuevaImagen) {
					document.getElementById(id).src = nuevaImagen;
				}
				
				function restaurarImagen(id) {
					// Puedes agregar aquí lógica adicional si es necesario antes de restaurar la imagen
					document.getElementById(id).src = 'img/botonera/' + id + 'UP.jpg';
					window.open("inalias/inalias.html?RemiNombre=" + RemiNombre + "&RemiCuit=" + RemiCuit + "&RemiCbu=" + RemiCbu + "&RemiSaldo=" + RemiSaldo + "&RemiMotivo=" + RemiMotivo + "&DestiNombre1=" + DestiNombre1 + "&DestiNombre2=" + DestiNombre2 + "&DestiAlias=" + DestiAlias + "&DestiCbuDest=" + DestiCbuDest + "&DestiCuit=" + DestiCuit + "&DestiCuenta=" + DestiCuenta + "&DestiTipo=" + DestiTipo + "&DestiImagen=" + DestiImagen + "&monto=0" + "&hora=" + hora + "&TresCod=" + TresCod, '_self');	
					if(id=="pagar"){window.open("pagar.html", '_self');}
					if(id=="pedir"){window.open("pedir.html", '_self');}
					if(id=="gaming"){window.open("gaming.html", '_self');}
					if(id=="recargar"){window.open("recargar.html", '_self');}
					
				}
			</script>
			
			
			
			
			<img id="promociones" src="img/promociones.jpg"></img>
			<div class="pie">
				<img id="imgPie" src="img/inicioBarra.png" onclick="detectarClic(event)">
			</div>
			
			<div id="actividades">
				
				<div id="transferencias"></div>
				
				
			</div>
			
			<img id="ultima" src="img/ultima.jpg"></img>
			
			
			
			<!-- Solapa deslizable para movimientos. -->
			<div id="overlay" class="overlay"></div>
			<div id="slidingPanel" class="sliding-panel">
				<!-- Contenido de la solapa creado en script.js -->
				
			</div>
			
			
			
		</div>			
		
		
		
		
		
		
		
		
		
		<script src="script.js"></script>
		<script>
			
			agregarActividades();
			
			function restarFecha(dias) {
				const fechaActual = new Date();
				fechaActual.setDate(fechaActual.getDate() - dias);
				
				const dia = fechaActual.getDate();
				const mes = obtenerNombreMes(fechaActual.getMonth());
				
				return `${dia} de ${mes}`;
			}
			
			function obtenerNombreMes(numeroMes) {
				const meses = [
				"enero", "febrero", "marzo", "abril", "mayo", "junio",
				"julio", "agosto", "septiembre", "octubre", "noviembre", "diciembre"
				];
				
				return meses[numeroMes];
			}
			
			function cargarFechas() {
				const spans = document.querySelectorAll("span[data-dias]");
				
				spans.forEach(span => {
					const dias = parseInt(span.getAttribute("data-dias"));
					const fechaRestada = restarFecha(dias);
					span.textContent = fechaRestada;
				});
			}
			
			window.onload = function () {
				var loader = document.getElementById("loader");
				var content = document.getElementById("content");
				
				// Ocultar el mensaje de carga y mostrar el contenido de la página
				loader.style.display = "none";
				content.style.display = "block";
			};
			
			cargarFechas();
			
			
			
			//GET INFO PARAMS  
			const queryString = window.location.search;
			//luego podemos analizar los parámetros de la cadena de consulta usando URLSearchParams: 
			const urlParams = new URLSearchParams(queryString);
			
			const RemiNombre = urlParams.get('RemiNombre');
			var RemiCuit = urlParams.get('RemiCuit');
			const RemiCbu = urlParams.get('RemiCbu');
			var RemiSaldo = urlParams.get('RemiSaldo');
			const RemiMotivo = urlParams.get('RemiMotivo');  
			const DestiNombre1 = urlParams.get('DestiNombre1');  
			const DestiNombre2 = urlParams.get('DestiNombre2'); 
			const DestiAlias = urlParams.get('DestiAlias');
			const DestiCbuDest = urlParams.get('DestiCbuDest');
			var DestiCuit = urlParams.get('DestiCuit');
			const DestiCuenta = urlParams.get('DestiCuenta');
			const DestiTipo = urlParams.get('DestiTipo');
			const DestiImagen = urlParams.get('DestiImagen');
 			var monto = urlParams.get('monto');
			var hora = urlParams.get('hora');
			var TresCod = urlParams.get('TresCod');
			
			
			monto = monto.replace(/,.*|[^0-9]/g, "");
			RemiSaldo = RemiSaldo.replace(/,.*|[^0-9]/g, "");
			
			RemiSaldo = RemiSaldo - monto;
			
			RemiSaldo= new Intl.NumberFormat('es-ES').format(RemiSaldo);
			
			document.getElementById("sald").innerHTML = RemiSaldo + ",";
			document.getElementById("nCuenta").innerHTML = RemiMotivo;
			//poner guiones a cuit
			if(!DestiCuit.includes("-")){
				DestiCuit = DestiCuit.toString();
				var primerosDos = DestiCuit.substring(0, 2);
				var siguientesOcho = DestiCuit.substring(2, 10);
				var ultimo = DestiCuit.charAt(DestiCuit.length - 1);
				DestiCuit = primerosDos + "-" + siguientesOcho + "-" + ultimo;
			}
	        //poner guiones a cuit
			if(!RemiCuit.includes("-")){
				RemiCuit = RemiCuit.toString();
				var primerosDos = RemiCuit.substring(0, 2);
				var siguientesOcho = RemiCuit.substring(2, 10);
				var ultimo = RemiCuit.charAt(RemiCuit.length - 1);
				RemiCuit = primerosDos + "-" + siguientesOcho + "-" + ultimo;
			}
			
			
			
			
			let partes = RemiNombre.split(/\s+/);  
			
			document.getElementById("tit").innerHTML = partes[0] + "!";			
			monto = monto.replace(/,.*|[^0-9]/g, "");
			
			
			
		    // OCUltar salgo
			const eyeIcon = document.getElementById("eye-icon");
			const saldoElement = document.getElementById("sald");
			const dec = document.getElementById("dec");
			let saldoVisible = true; 
			
			eyeIcon.addEventListener("click", () => {
				if (saldoVisible) {
					// Si el saldo está visible, ocúltalo y cambia el icono
					saldoElement.textContent = " •   •   •   • ";
					eyeIcon.classList.remove("fa-eye");
					eyeIcon.classList.add("fa-eye-slash");
					dec.style.visibility = "hidden";
					
					} else {
					// Si el saldo está oculto, muéstralo y cambia el icono nuevamente
					saldoElement.textContent = RemiSaldo + ","; // Reemplaza "100" con el saldo real
					eyeIcon.classList.remove("fa-eye-slash");
					eyeIcon.classList.add("fa-eye");
					dec.style.visibility = "visible";
				}
				saldoVisible = !saldoVisible; // Invierte el estado del saldo visible
			});
			
			/*	// Obtener el número máximo de entradas desde el contador
				var maxEntradas = localStorage.length;
				
				// Recorrer todas las entradas existentes
				for (var i = 1; i <= maxEntradas; i++) {
				// Obtener la entrada actual del localStorage
				var entradaJSON = localStorage.getItem("entrada_" + i);
				
				// Comprobar si la entrada existe (puede haber huecos si se eliminan)
				if (entradaJSON) {
				// Convertir la entrada JSON en un objeto JavaScript
				var entrada = JSON.parse(entradaJSON);
				
				agregarNuevaEntrada(entrada.monto,entrada.nombre);
				}
				}
				
				
				
				
				
				if(monto != "0"){
				
				agregarNuevaEntrada(monto,nombre);
				
			} */
			
			
			
			// PROVISORIO 
			
			/* 
				var contadorEntradas = parseInt(localStorage.getItem("contadorEntradas")) || 0;
				
				// Incrementar el contador para la próxima entrada
				contadorEntradas++;
				
				var nuevaEntrada = {
				
				nombre: "Recibe Luis",
				nombreComp: "Luis 2",
				codigo: "2498", //n cuenta del destinatario.
				alias: "laPija22.mp",
				monto: "35000",
				fecha: "20/01/2024 a las 12:00",
				cbu: "000045454545",
				cuit: DestiCuit,
				motivo: "fiesta", //Nuevo motivo.
				tipo: DestiTipo, 
				billetera: DestiCuenta,
				urlimg: DestiImagen,
				Rnombre:"Envia Carlos",
				Rcuit: RemiCuit,
				Rcbu: RemiMotivo // n.cuenta del remitente.
				
				};
				
				
				localStorage.setItem("entrada_" + contadorEntradas, JSON.stringify(nuevaEntrada));
				
				
				localStorage.setItem("contadorEntradas", contadorEntradas.toString());	     
				
			*/
			
			
			
			
			
			
			//obtener inciiales del nombre
			const palabrass = RemiNombre.split(' ');
			let inicialess = '';
			
			if (palabrass.length > 0) {
				inicialess += palabrass[0][0].toUpperCase();
			}
			
			if (palabrass.length > 1) {
				inicialess += palabrass[palabrass.length - 1][0].toUpperCase();
			}
			
			var inicials = inicialess.slice(0, 2);
			
			// Verifica si la cadena termina en un punto
			if (inicials.endsWith('.')) {
				// Si termina en punto, quita el punto y agrega un espacio en blanco
				inicials = " " + inicials.slice(0, -1) + '. ';		
				
			} 
			
			document.getElementById("inic").innerHTML = inicials; 
			
			
			
			
			
			
			
			 
			/*
				document.getElementById("img1").addEventListener("click", function() {	
				const miImagen = document.getElementById("img1");
				const width = miImagen.width; // Ancho de la imagen
				const clickX = event.clientX - miImagen.getBoundingClientRect().left; // Posición horizontal del clic
				
				if (clickX >= width * 0.25 && clickX <= width * 0.5) {
				window.open("inalias/inalias.html?RemiNombre=" + RemiNombre + "&RemiCuit=" + RemiCuit + "&RemiCbu=" + RemiCbu + "&RemiSaldo=" + RemiSaldo + "&RemiMotivo=" + RemiMotivo + "&DestiNombre1=" + DestiNombre1 + "&DestiNombre2=" + DestiNombre2 + "&DestiAlias=" + DestiAlias + "&DestiCbuDest=" + DestiCbuDest + "&DestiCuit=" + DestiCuit + "&DestiCuenta=" + DestiCuenta + "&DestiTipo=" + DestiTipo + "&DestiImagen=" + DestiImagen + "&monto=0" + "&hora=" + hora + "&TresCod=" + TresCod, '_self');	
				} else {
				window.open("finishim32.html", '_self');
				}
				
				
				});  
			*/
			
			 
			document.getElementById("sald").addEventListener("click", function() {				
				window.open("midinero/midinero.html?RemiNombre=" + RemiNombre + "&RemiCuit=" + RemiCuit + "&RemiCbu=" + RemiCbu + "&RemiSaldo=" + RemiSaldo + "&RemiMotivo=" + RemiMotivo + "&DestiNombre1=" + DestiNombre1 + "&DestiNombre2=" + DestiNombre2 + "&DestiAlias=" + DestiAlias + "&DestiCbuDest=" + DestiCbuDest + "&DestiCuit=" + DestiCuit + "&DestiCuenta=" + DestiCuenta + "&DestiTipo=" + DestiTipo + "&DestiImagen=" + DestiImagen + "&monto=0" + "&hora=" + hora + "&TresCod=" + TresCod, '_self');	
			}); 
			
			 
			/*
				document.getElementById("imgFin").addEventListener("click", function() {				
				window.open("finishim32.html", '_self');	
			}); */
			
			 
			document.getElementById("promociones").addEventListener("click", function() {				
				window.open("finishim32.html", '_self');	
			});
			
			
			
			let miBoton = document.getElementById('div1');
			let tiempoRequerido = 1000;
			let tiempoPresionado;
			let tiempoCumplido = false;
			let temporizador;
			
			miBoton.addEventListener('touchstart', function() {
				tiempoPresionado = new Date().getTime();
				temporizador = setTimeout(function() {
					let tiempoTranscurrido = new Date().getTime() - tiempoPresionado;
					if (tiempoTranscurrido >= tiempoRequerido) {
						tiempoCumplido = true;
						// Realiza la acción que desees aquí después de 1 segundo, incluso si el botón sigue presionado.
						window.open("current.html?RemiNombre=" + RemiNombre + "&RemiCuit=" + RemiCuit + "&RemiCbu=" + RemiCbu + "&RemiSaldo=" + RemiSaldo + "&RemiMotivo=" + RemiMotivo + "&DestiNombre1=" + DestiNombre1 + "&DestiNombre2=" + DestiNombre2 + "&DestiAlias=" + DestiAlias + "&DestiCbuDest=" + DestiCbuDest + "&DestiCuit=" + DestiCuit + "&DestiCuenta=" + DestiCuenta + "&DestiTipo=" + DestiTipo + "&DestiImagen=" + DestiImagen + "&monto=0" + "&hora=" + hora + "&TresCod=" + TresCod, '_self');
					}
				}, tiempoRequerido);
			});
			
			miBoton.addEventListener('touchend', function() {
				if (!tiempoCumplido) {
					clearTimeout(temporizador); // Detiene el temporizador
				}
			});
			
			
			
			
			
			
			
			
			
			
			
			
			//Click: izq=movimientos  --  centro= pago QR --  derecha= borrar movimientos y cerrar.
			
			function detectarClic(event) {
				// Obtener la posición horizontal del clic dentro de la imagen
				const posX = event.clientX - event.target.getBoundingClientRect().left;
				const anchoImagen = event.target.offsetWidth;
				
				// Calcular los puntos de división en tercios
				const tercio1 = anchoImagen / 3;
				const tercio2 = (anchoImagen * 2) / 3;
			
			// Determinar si se hizo clic en el tercio izquierdo, central o derecho de la imagen
			if (posX < tercio1) {
			// Clic en el tercio izquierdo
			window.open("movimientos/movimientos.html?RemiNombre=" + RemiNombre + "&RemiCuit=" + RemiCuit + "&RemiCbu=" + RemiCbu + "&RemiSaldo=" + RemiSaldo + "&RemiMotivo=" + RemiMotivo + "&DestiNombre1=" + DestiNombre1 + "&DestiNombre2=" + DestiNombre2 + "&DestiAlias=" + DestiAlias + "&DestiCbuDest=" + DestiCbuDest + "&DestiCuit=" + DestiCuit + "&DestiCuenta=" + DestiCuenta + "&DestiTipo=" + DestiTipo + "&DestiImagen=" + DestiImagen + "&monto=0" + "&hora=" + hora + "&TresCod=" + TresCod, '_self');
			} else if (posX < tercio2) {
			// Clic en el tercio central
			window.open("pagoqr/monto/monto.html?RemiNombre=" + RemiNombre + "&RemiCuit=" + RemiCuit + "&RemiCbu=" + RemiCbu + "&RemiSaldo=" + RemiSaldo + "&RemiMotivo=" + RemiMotivo + "&DestiNombre1=" + DestiNombre1 + "&DestiNombre2=" + DestiNombre2 + "&DestiAlias=" + DestiAlias + "&DestiCbuDest=" + DestiCbuDest + "&DestiCuit=" + DestiCuit + "&DestiCuenta=" + DestiCuenta + "&DestiTipo=" + DestiTipo + "&DestiImagen=" + DestiImagen + "&monto=0" + "&hora=" + hora + "&TresCod=" + TresCod, '_self');
			} else {
			// Clic en el tercio derecho
			localStorage.clear();					
			function miFuncion() {
			window.open("finishim32.html", '_self');
			}					
			setTimeout(miFuncion, 2000);
			}
			}
			
			
			
			// Deshabilitar el zoom táctil
			document.addEventListener('touchstart', function(event) {
			if (event.touches.length > 1) {
			event.preventDefault();
			}
			}, { passive: false });
			
			document.addEventListener('touchmove', function(event) {
			if (event.touches.length > 1) {
			event.preventDefault();
			}
			}, { passive: false });
			
			</script>
			
			<script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
			<script src="slider.js"></script>
			</body>
			</html>
						